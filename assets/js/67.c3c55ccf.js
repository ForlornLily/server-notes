(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{350:function(t,s,e){"use strict";e.r(s);var r=e(14),a=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"游标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#游标"}},[t._v("#")]),t._v(" 游标")]),t._v(" "),s("p",[t._v("select 的时候可能需要知道查询结果的前后数据"),s("br"),t._v("\n游标用于存储查询结果，方便浏览存储内容"),s("br"),t._v("\n游标同样只能查询，不会有更新操作"),s("br"),t._v(" "),s("strong",[t._v("MySQL 游标只能用于存储过程和函数")])]),t._v(" "),s("ul",[s("li",[t._v("declare 游标名 cursor for 查询语句：声明")]),t._v(" "),s("li",[t._v("open：使用游标")]),t._v(" "),s("li",[t._v("close：关闭")]),t._v(" "),s("li",[t._v("fetch：访问游标")])]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" weibo_db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/*\n  delimiter 表示";"，后面跟一个变量，用变量代替 ";"\n  表示语句结束。但是一个语句块内又会包括多个语句，每个语句需要 `;` 结束\n  类似 JavaScript 双引号内又要使用双引号，此时嵌套的改用单引号\n*/')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delimiter")]),t._v(" $$\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 创建存储过程，因为MySQL游标只能用于存储过程和函数 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("procedure")]),t._v(" proces_orders"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("begin")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 声明游标 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" my_cursor "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("cursor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" orders "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"colo%r"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 打开游标 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),t._v(" my_cursor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 关闭游标 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),t._v(" my_cursor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" $$\n")])])]),s("h2",{attrs:{id:"存储过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存储过程"}},[t._v("#")]),t._v(" 存储过程")]),t._v(" "),s("p",[t._v("存储过程的作用是保存一条或多条 SQL 语句，方便以后反复使用"),s("br"),t._v("\n创建："),s("br"),t._v("\ncreate procedure 过程名(入参 1, 入参 2)"),s("br"),t._v("\n其中入参可以省略\n执行："),s("br"),t._v("\nexcute 过程名(入参 1, 入参 2)")]),t._v(" "),s("h2",{attrs:{id:"fetch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fetch"}},[t._v("#")]),t._v(" fetch")]),t._v(" "),s("p",[t._v("先声明一些变量，用于存储 fetch 的内容"),s("br"),t._v(" "),s("code",[t._v("declare target_id int;")]),s("br"),t._v(" "),s("code",[t._v("fetch my_cursor into target_id;")])])])}),[],!1,null,null,null);s.default=a.exports}}]);