(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{316:function(s,e,t){"use strict";t.r(e);var r=t(14),a=Object(r.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"request-和-response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-和-response"}},[s._v("#")]),s._v(" Request 和 Response")]),s._v(" "),e("h2",{attrs:{id:"常用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用"}},[s._v("#")]),s._v(" 常用")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/greeting'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'greeting'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello esteemed programmer!'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("style")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// req.query 获取查询串的值")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("id")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookies"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  req.cookie / req.signedCookies 获取 cookies")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// req.session 获取 Session 值")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("ul",[e("li",[e("code",[s._v("res.render")]),s._v("：渲染视图，如果只是简单内容，可以用 "),e("code",[s._v("res.send")])]),s._v(" "),e("li",[e("code",[s._v("res.status(code)")]),s._v("：状态码，默认 200")])]),s._v(" "),e("p",[s._v("可以链式调用："),e("code",[s._v("res.status(404).render('404')")])]),s._v(" "),e("h2",{attrs:{id:"request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[s._v("#")]),s._v(" Request")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("req.params")])]),s._v(" "),e("li",[e("p",[s._v("req.query")])]),s._v(" "),e("li",[e("p",[s._v("req.body：相关内容 "),e("a",{attrs:{href:"./31_form"}},[s._v("form")])])]),s._v(" "),e("li",[e("p",[s._v("req.route")])]),s._v(" "),e("li",[e("p",[s._v("req.cookies, req.signedCookies：相关内容 "),e("a",{attrs:{href:"./32_cookie"}},[s._v("cookie")])])]),s._v(" "),e("li",[e("p",[s._v("req.headers")])]),s._v(" "),e("li",[e("p",[s._v("req.accepts")])]),s._v(" "),e("li",[e("p",[s._v("req.ip")])]),s._v(" "),e("li",[e("p",[s._v("req.path")])]),s._v(" "),e("li",[e("p",[s._v("req.hostname")])]),s._v(" "),e("li",[e("p",[s._v("req.xhr")])]),s._v(" "),e("li",[e("p",[s._v("req.protocol")])]),s._v(" "),e("li",[e("p",[s._v("req.secure")])]),s._v(" "),e("li",[e("p",[s._v("req.url, req.originalUrl")])])]),s._v(" "),e("h2",{attrs:{id:"response"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[s._v("#")]),s._v(" Response")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("res.status")])]),s._v(" "),e("li",[e("p",[s._v("res.set")])]),s._v(" "),e("li",[e("p",[s._v("res.cookies, res.clearCookie：相关内容 "),e("a",{attrs:{href:"./32_cookie"}},[s._v("cookie")])])]),s._v(" "),e("li",[e("p",[s._v("res.redirect")])]),s._v(" "),e("li",[e("p",[s._v("res.send")])]),s._v(" "),e("li",[e("p",[s._v("res.json")])]),s._v(" "),e("li",[e("p",[s._v("res.jsonp")])]),s._v(" "),e("li",[e("p",[s._v("res.end")])]),s._v(" "),e("li",[e("p",[s._v("res.type")])]),s._v(" "),e("li",[e("p",[s._v("res.format")])]),s._v(" "),e("li",[e("p",[s._v("res.attachment, res.download")])]),s._v(" "),e("li",[e("p",[s._v("res.sendFile")])]),s._v(" "),e("li",[e("p",[s._v("res.links")])]),s._v(" "),e("li",[e("p",[s._v("res.locals, res.render：相关内容 "),e("a",{attrs:{href:"./30_views"}},[s._v("视图复用")])])])]),s._v(" "),e("p",[s._v("res.locals: 在 "),e("code",[s._v("res")]),s._v(" 中赋值，使得值在当前 response 所在的函数内可用。通常用来设置模板渲染"),e("br"),s._v("\n对应的还有 "),e("code",[s._v("app.locals")]),s._v("，相当于在 "),e("code",[s._v("app")]),s._v(" 整个实例中都可以用")])])}),[],!1,null,null,null);e.default=a.exports}}]);